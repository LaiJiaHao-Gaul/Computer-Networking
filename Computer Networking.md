# 计算机网络 自顶向下方法

## 第一章：计算机网络与因特网

### 总结小笔记

1. 每个ISP自身就是一个由多台 **分组交换机** 和 **多段通信链路** 组成的网络。 tips：ISP = Internet Service Provider

2. 因特网就是将 **端系统 彼此互联**，因此 为端系统提供接入的ISP也必须互联。

3. 低层ISP 通过 高层ISP **互联**起来，高层ISP 通过 高速光纤链路互联的高速路由器 组成。

4. 无论是 高层ISP 还是 低层ISP，每个ISP都是**独立管理**的，运行着IP协议。

5. **TCP传输控制协议 和 IP网际协议 是因特网中两个最为重要的协议**。tips：TCP是控制层协议，IP是网络层协议。

6. IP协议定义了**在路由器和端系统之间发送和接收的分组格式**。

7. 因特网的主要协议统称为 **TCP/IP**。

8. **套接字接口** **规定了**运行在一个端系统上的程序请求因特网基础设施向运行在另一个端系统上的特定目的地程序**交付数据的方式**。

9. **因特网套接字接口**是一套发送程序必须遵循的**规则集合**，因此因特网能够将数据交付给目的地。

10. 通过网络链路和交换机移动数据有两种基本方法：**电路交换**和**分组交换**。

11. 链路中的电路是通过**频分复用(FDM)**或**时分复用(TDM)**来实现的。

12. 对于FDM,链路的频谱由**跨越链路创建的所有连接共享**。

13. 在连接期间链路为每条链接专用一个频段。

14. 对于FDM,每条电路**连续地得到部分带宽**。

15. 对于TDM,每条电路在**短时间间隔(即间隙)中周期地得到所有带宽**。

16. 传输时延是**路由器推出分组所需要的时间**，它是**分组长度和链路传输速率的函数**，而与两台路由器之间的距离**无关**。

17. 传播时延是**一个比特从一台路由器传播到另一台路由器所需要的时间**，它是两台路由器之间距离的函数，而**与分组长度或链路传输速率无关**。

18. 因特网的协议栈由5个层次组成： **物理层、链路层、网络层、运输层、应用层**。

19. 应用层协议创建并部署是非常容易的。

20. 常用的因特网应用层协议：HTTP(Web文档的请求和传送)、SMTP(电子邮件报文的传送)、FTP(两个端系统之间文件传送)、DNS(域名解析系统)。

21. OSI参考模型分为七层： **应用层 表示层 会话层 运输层 网络层 链路层 物理层**。

22. 五层因特网协议栈描述：
    1、应用层：应用层是**网络应用程序及它们的应用层协议存留的地方**。

    2、运输层：因特网的运输层在**应用程序端点之间**传送**应用层报文**。

    3、网络层: 网络层负责将称为**数据报的网络层分组**从一台主机移动到另一台主机。

    4、链路层：在每一个节点，网络层将数据报下传给链路层，链路层沿着路径将数据报传递给下一个节点，在该下一个节点，链路层将数据报上传给网络层。

    5、物理层：物理层任务是将帧中的一个个比特从一个节点移动到下一个节点。

23. 在因特网中，有两种运输层协议 TCP 和 UDP ，两者都能运输应用层报文，但提供的服务不太相同（后面会说）。

24. 网络层协议 一般就是说 国际协议IP：IP仅有一个，所有具有网络层的因特网组件必须运行IP。

25. 链路层协议 以太网、WIFI、电缆接入网的POCSIS协议。

26. 封装：在发送主机端，一个应用层报文被传送给运输层，运输层收取报文并附上附加信息（所谓运输层首部信息），该首部信息将被接收端的运输层使用。同时，应用层报文和运输层首部信息构成了运输层报文段，这一过程可以说是运输层报文封装了应用层报文。随后 运输层向网络层传递封装后的运输层报文段，网络层增加源和目的地等网络层首部信息，这也是一层封装，生成了网络层数据报。网络层数据报再被传递给链路层，链路层增加自己的链路层首部信息，并生成链路层帧，在每一层，一个分组具有两种类型的字段：首部字段和有效载荷字段。

27. 网络接入方式分类：

    1、家庭接入：DSL、电缆、FTTH、拨号和卫星。

    2、企业和家庭接入：以太网 和 WIFI。

    3、广域无线接入： 3G 和 LTE。

28. 各层单位

应用层报文：一个端系统中的应用程序使用协议与另一个端系统中的应用程序交换信息的分组叫做应用层报文。

运输层报文：对应用层分组封装后的运输层分组就是运输层报文段。

网络层数据报：对运输层分组（运输层报文段）封装后的网络层分组是网络层数据报。

链路层帧：对网络层分组封装后的链路层分组是链路层帧。

## 第二章：应用层

1. 进程寻址需要定义两种信息：① 主机的地址 ② 在目的主机中指定接收进程的标识符。

2. IP地址： 是一个32比特的量，并且能够唯一地标识该主机。

3. Web服务器用端口号80来标识，邮件服务器用端口号25来标识。

4. 套接字是同一台主机内应用层与运输层之间的接口，由于该套接字是建立网络应用程序的可编程接口，因此套接字也称为应用程序和网络之间的应用程序编程接口（Appliaction Programming Interface API)。

5. 应用程序选择运输层协议时的服务要求分类：①可靠数据传输 ②吞吐量 ③定时 ④安全性

6. 因特网（更一般的是TCP/IP网络）为应用程序提供共两个运输层协议，即UDP和TCP（都不提供加密机制）

7. TCP 服务模型包括面向连接服务和可靠数据传输服务。

8. 应用层协议定义了运行在端系统上的应用程序进程如何相互传递报文。特别是应用层协议定义了：
    ①交换的报文类型，例如请求报文和响应报文。

    ②各种报文类型的语法，如报文中的各个字段及这些字段是如何描述的

    ③字段的含义，即这些字段中的信息的含义。

    ④确定一个进程何时以及如何发送报文，对报文进行相应的规则。

9. HTTP定义了Web客户向Web服务器请求Web页面的方式，以及服务器向客户传送Web页面的方式。

10. 使用TCP作为它的支撑运输协议。

11. TCP为HTTP提供可靠数据传输服务。

12. HTTP服务器向客户发送被请求的文件，而不存储任何关于该客户的状态信息，所以说HTTP是一个无状态协议。

13. HTTP既能够使用非持续连接，也能够使用持续连接。

14. 尽管HTTP在其默认方式下使用持续连接，HTTP客户和服务器也能配置成使用非持续连接。

15. 往返时间(Round-Trip Time,RTT)的定义：该时间是指一个短分组从客户到服务器然后再返回到客户所花费的时间，RTT包括分组传播时延，分组在中间路由器和交换机上的排队时延以及分组处理时延。

16. HTTP报文有两种：**请求报文** 和 **响应报文**。

17. HTTP请求访问的第一行叫作**请求行**，其后继行叫作 **首部行**。

18. 请求行 有三个字段：**方法字段**、**URL字段**和**HTTP版本字段**。

19. 方法字段可以取不同的值，包括**GET**、**POST**、**HEAD**、**PUT** 和 **DELETE**。

20. 首部行 Host: 如 www.baidu.com 指明了**对象所在的主机**。

21. 首部行 Connection: close 该浏览器告诉服务器**不要**麻烦的**使用持续连接**，它要求服务器在**发送完**被请求的对象后就**关闭这条连接**。

22. 首部行 User-agent: 指明**用户代理**，即**向服务器发送请求的浏览器的类型**。

23. 首部行 Accept-language: 表示用户向得到该对象的**语言版本**。

24. 网络层协议 一般就是说 国际协议IP：IP仅有一个，所有具有网络层的因特网组件必须运行IP。

25. 链路层协议 以太网、WIFI、电缆接入网的POCSIS协议。

26. 封装：在发送主机端，一个应用层报文被传送给运输层，运输层收取报文并附上附加信息（所谓运输层首部信息），该首部信息将被接收端的运输层使用。同时，应用层报文和运输层首部信息构成了运输层报文段，这一过程可以说是运输层报文封装了应用层报文。随后 运输层向网络层传递封装后的运输层报文段，网络层增加源和目的地等网络层首部信息，这也是一层封装，生成了网络层数据报。网络层数据报再被传递给链路层，链路层增加自己的链路层首部信息，并生成链路层帧，在每一层，一个分组具有两种类型的字段：首部字段和有效载荷字段。

27. 网络接入方式分类：

    1、家庭接入：DSL、电缆、FTTH、拨号和卫星。

    2、企业和家庭接入：以太网 和 WIFI。

    3、广域无线接入： 3G 和 LTE。

28. 各层单位

应用层报文：一个端系统中的应用程序使用协议与另一个端系统中的应用程序交换信息的分组叫做应用层报文。

运输层报文：对应用层分组封装后的运输层分组就是运输层报文段。

网络层数据报：对运输层分组（运输层报文段）封装后的网络层分组是网络层数据报。

链路层帧：对网络层分组封装后的链路层分组是链路层帧。

## 第二章：应用层

1. 进程寻址需要定义两种信息：① 主机的地址 ② 在目的主机中指定接收进程的标识符。

2. IP地址： 是一个32比特的量，并且能够唯一地标识该主机。

3. Web服务器用端口号80来标识，邮件服务器用端口号25来标识。

4. 套接字是同一台主机内应用层与运输层之间的接口，由于该套接字是建立网络应用程序的可编程接口，因此套接字也称为应用程序和网络之间的应用程序编程接口（Appliaction Programming Interface API)。

5. 应用程序选择运输层协议时的服务要求分类：①可靠数据传输 ②吞吐量 ③定时 ④安全性

6. 因特网（更一般的是TCP/IP网络）为应用程序提供共两个运输层协议，即UDP和TCP（都不提供加密机制）

7. TCP 服务模型包括面向连接服务和可靠数据传输服务。

8. 应用层协议定义了运行在端系统上的应用程序进程如何相互传递报文。特别是应用层协议定义了：
    ①交换的报文类型，例如请求报文和响应报文。

    ②各种报文类型的语法，如报文中的各个字段及这些字段是如何描述的

    ③字段的含义，即这些字段中的信息的含义。

    ④确定一个进程何时以及如何发送报文，对报文进行响应的规则。

9. HTTP定义了Web客户向Web服务器请求Web页面的方式，以及服务器向客户传送Web页面的方式。

10. 使用TCP作为它的支撑运输协议。

11. TCP为HTTP提供可靠数据传输服务。

12. HTTP服务器向客户发送被请求的文件，而不存储任何关于该客户的状态信息，所以说HTTP是一个无状态协议。

13. HTTP既能够使用非持续连接，也能够使用持续连接。

14. 尽管HTTP在其默认方式下使用持续连接，HTTP客户和服务器也能配置成使用非持续连接。

15. 往返时间(Round-Trip Time,RTT)的定义：该时间是指一个短分组从客户到服务器然后再返回到客户所花费的时间，RTT包括分组传播时延，分组在中间路由器和交换机上的排队时延以及分组处理时延。

16. HTTP报文有两种：**请求报文** 和 **响应报文**。

17. HTTP请求访问的第一行叫作**请求行**，其后继行叫作 **首部行**。

18. **HTTP请求行** 有三个字段：**方法字段**、**URL字段**和**HTTP版本字段**。

19. **HTTP请求行方法字段**可以取不同的值，包括**GET**、**POST**、**HEAD**、**PUT** 和 **DELETE**。

20. HTTP首部行 Host: 如 www.baidu.com 指明了**对象所在的主机**。

21. HTTP首部行 Connection: close 该浏览器告诉服务器**不要**麻烦的**使用持续连接**，它要求服务器在**发送完**被请求的对象后就**关闭这条连接**。

22. HTTP首部行 User-agent: 指明**用户代理**，即**向服务器发送请求的浏览器的类型**。

23. HTTP首部行 Accept-language: 表示用户向得到该对象的**语言版本**。

24. HTTP响应报文有三个部分： 一个初始状态行、6个首部行、实体体->主要部分。

    状态行有一行，但分为三个字段：协议版本字段、状态码和相应状态信息。

    实体体是报文的主要部分，即它包含了所请求的对象本身。

25. HTTP响应报文首部行

    Connection:close 服务器告诉客户，发送完报文后将关闭该TCP连接。

    Date:指示服务器产生并发送该响应报文的日期和时间，这个时间并不是指对象创建或最后修改的时间，而是服务器从它的文件系统中检索到该对象，将该对象插入响应报文，并发送该响应报文的时间。

    Server:指示该报文是由什么服务器产生的。类似于HTTP请求报文中的User-Agent首部行

    Last-Modified:指示了对象创建或者最后修改的日期和时间，它对既可能在本地客户也可能在网络缓存服务器上的对象缓存来说非常重要。

    Content-Length:指示了被发送对象中的字节数。

    Content-Type:指示了实体体中的对象是HTML文本。

26. 状态码：

    200 OK : 请求成功，信息在返回的响应报文中。

    301 Moved Permanently : 请求的兑现已经被永久转移了，新的URL定义在响应报文的Loaction：首部行中，客户软件将自动获取新的URL。

    400 Bad Request : 一个通用差错代码，指示该请求不能被服务器理解。

    404 Not Found : 被请求的文档不在服务器上。

    505 HTTP Version Not Supported： 服务器不支持请求报文使用的HTTP协议版本。

27. Web缓存器(Web chche)也叫代理服务器，它是能够代表初始Web服务器来满足HTTP请求的网络实体。

    Web缓存器有自己的磁盘存储空间，并在存储空间中保存最近请求过的对象的副本。

28. cookie 技术有四个组件：

    ①在HTTP响应报文中的一个cookie首部行；

    ②在HTTP亲求报文中的一个cookie首部行；

    ③在用户端系统中保留有一个cookie文件，并由用户的浏览器进行管理。

    ④位于Web站点的一个后端数据库。

29. 因特网电子邮件系统有3个主要组成部分： ①用户代理 ②邮件服务器 ③简单邮件传输协议。

30. HTTP 和 SMTP 的相同点以及区别：

    都用于从一台主机向另一台主机传送文件：

        HTTP从Web服务器向Web客户传送文件(对象)。

        SMTP从邮件服务器向另一个邮件服务器传送文件(电子邮件报文)。

    当进行文件传送时，持续的HTTP和SMTP都使用持续连接。

    区别在于：

        ①HTTP主要是一个拉协议(pull protocol)。

         SMTP是一个推协议(push protocol)。

        ②HTTP不要求报文编码格式。

         SMTP要求7比特的ASCII字符。

        ③对既包含文本又包含图形的文档处理：

            HTTP把每个对象封装到它自己的HTTP响应报文中。

            SMTP则把所有报文对象都放在一个报文中。

31. DNS 是：

    ① 一个由分层的DNS服务器(DNS server)实现的分布式数据库；

    ② 一个使得主机能够查询分布式数据库的应用层协议。

32. DNS 协议运行在UDP之上，使用53号端口。

33. DNS 提供的服务：

    ①主机名到IP地址的转换

    ②主机别名：有着复杂主机名的主机能拥有一个或者多个别名。

     应用程序可以调用DNS来获得主机别名对应的规范主机名以及主机的IP地址。

    ③右键服务器别名(mail server aliasing) 电子邮件应用程序可以调用DNS，对提供的主机名别名进行解析，以获得该主机的规范主机名及其IP地址。

    ④负载分配(load distribution)：DNS也用于在冗余的服务器之间进行负载分配。

34. DNS工作机理概述：

    用户主机 要将主机名转换为IP地址 -> 调用DNS客户端，并指明需要被转换的主机名。

    主机上的DNS收到后 -> 向网络发送一个DNS查询报文 -> 接收到DNS回答报文

    (所有的DNS请求和回答报文使用UDP数据报经端口53发送)

    映射结果被传递到调用DNS的应用程序。

35. 任何CDN部署，其核心是集群选择策略(cluster selection strategy)，即动态地将客户定向到CDN中地某个服务器集群或数据中心的机制。

36. 套接字的目的地址包含：目的地的IP地址 和 套接字的端口号。

## 运输层

1. 运输层协议为运行在不同主机上的应用进程之间提供了逻辑通信(logic communica-tion)功能。

2. 运输层协议是在端系统中而不是在路由器中实现的。

3. 运输层协议能够提供的服务常常受制于低层网络协议的服务模型。

4. 运输层协议能提供可靠的数据传输服务，同时加密应用程序报文。

5. 因特网有两种运输层协议 UDP：不可靠 无连接。

                        TCP：可靠，面向连接。

6. 因特网网络层IP协议。即网际协议，IP为主机之间提供了逻辑通信。

7. IP的服务模型是尽力而为交付服务(best-effort delivery serv-ice)。这意味着IP尽它最大的努力在通信的主机之间交付报文段，但它并不做任何确保，特别是它不确保报文段的交付，不保证报文段中数据的完整性。因此，IP被称为不可靠服务(unreliable service)。


















